<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Using max_coverage_relocation • maxcovr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Using max_coverage_relocation">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">maxcovr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.3.9200</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/cross_validation_with_maxcovr.html">Using Cross Validation with maxcovr</a></li>
    <li><a class="dropdown-item" href="../articles/intro_to_maxcovr.html">Using maxcovr</a></li>
    <li><a class="dropdown-item" href="../articles/using_max_coverage_relocation.html">Using max_coverage_relocation</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/njtierney/maxcovr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Using max_coverage_relocation</h1>
                        <h4 data-toc-skip class="author">Nicholas
Tierney</h4>
            
            <h4 data-toc-skip class="date">2024-11-26</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/njtierney/maxcovr/blob/master/vignettes/using_max_coverage_relocation.Rmd" class="external-link"><code>vignettes/using_max_coverage_relocation.Rmd</code></a></small>
      <div class="d-none name"><code>using_max_coverage_relocation.Rmd</code></div>
    </div>

    
    
<p>This vignette provides a guide to using <code>maxcovr</code> to solve
the maximum covering location problem, assuming that you can relocate
facilities.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Attaching package: 'dplyr'</span></span></code></pre>
<pre><code><span><span class="co">## The following objects are masked from 'package:stats':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     filter, lag</span></span></code></pre>
<pre><code><span><span class="co">## The following objects are masked from 'package:base':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     intersect, setdiff, setequal, union</span></span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/njtierney/maxcovr" class="external-link">maxcovr</a></span><span class="op">)</span></span></code></pre></div>
<p>The “fixed location” method provided in <code>max_coverage</code> is
limited in that it assumes that you cannot move existing facilities.
<code>max_coverage_relocation</code> assumes that you can move already
existing facilities, but that there is some cost of removal, and a cost
of installation.</p>
<p>To illustrate the benefits of relocation, we are first going to
consider an example where the existing facilities provide no coverage to
users. We identify facility locations that are really far away.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">york_selected_worst_id</span> <span class="op">&lt;-</span> <span class="va">york_crime</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="../reference/nearest.html">nearest</a></span><span class="op">(</span><span class="va">york</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="op">-</span><span class="va">distance</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">desig_id</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">desig_id</span><span class="op">)</span></span>
<span>    </span>
<span>    </span>
<span><span class="co"># york_worst &lt;- york_selected_worst_id %&gt;% </span></span>
<span><span class="va">york_existing_worst</span> <span class="op">&lt;-</span> <span class="va">york_selected_worst_id</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">york</span>,</span>
<span>              by <span class="op">=</span> <span class="st">"desig_id"</span><span class="op">)</span></span></code></pre></div>
<p>Then we identify some really ideal locations.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">york_not_selected_worst</span> <span class="op">&lt;-</span> <span class="va">york</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html" class="external-link">anti_join</a></span><span class="op">(</span><span class="va">york_existing_worst</span>,</span>
<span>              by <span class="op">=</span> <span class="st">"desig_id"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">york_proposed_best</span> <span class="op">&lt;-</span> </span>
<span> <span class="va">york_crime</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="../reference/nearest.html">nearest</a></span><span class="op">(</span><span class="va">york_not_selected_worst</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">distance</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">desig_id</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">desig_id</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">york</span>,</span>
<span>              by <span class="op">=</span> <span class="st">"desig_id"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">york_proposed_best</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 101 × 7</span></span></span>
<span><span class="co">##    desig_id  long   lat object_id pref_ref name                            grade</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> DYO788   -<span style="color: #BB0000;">1.09</span>  54.0      <span style="text-decoration: underline;">3</span>362   <span style="text-decoration: underline;">463</span>995 <span style="color: #BB0000;">NA</span>                              II*  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> DYO857   -<span style="color: #BB0000;">1.08</span>  54.0      <span style="text-decoration: underline;">5</span>549   <span style="text-decoration: underline;">463</span>864 UNIVERSITY COLLEGE OF RIPON AN… II   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> DYO857   -<span style="color: #BB0000;">1.08</span>  54.0      <span style="text-decoration: underline;">4</span>212   <span style="text-decoration: underline;">463</span>864 UNIVERSITY COLLEGE OF RIPON AN… II   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> DYO1212  -<span style="color: #BB0000;">1.08</span>  54.0      <span style="text-decoration: underline;">5</span>843   <span style="text-decoration: underline;">463</span>237 <span style="color: #BB0000;">NA</span>                              II   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> DYO1212  -<span style="color: #BB0000;">1.08</span>  54.0      <span style="text-decoration: underline;">4</span>506   <span style="text-decoration: underline;">463</span>237 <span style="color: #BB0000;">NA</span>                              II   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> DYO862   -<span style="color: #BB0000;">1.08</span>  54.0      <span style="text-decoration: underline;">5</span>554   <span style="text-decoration: underline;">463</span>874 <span style="color: #BB0000;">NA</span>                              II   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> DYO862   -<span style="color: #BB0000;">1.08</span>  54.0      <span style="text-decoration: underline;">4</span>217   <span style="text-decoration: underline;">463</span>874 <span style="color: #BB0000;">NA</span>                              II   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> DYO1146  -<span style="color: #BB0000;">1.08</span>  54.0      <span style="text-decoration: underline;">5</span>793   <span style="text-decoration: underline;">463</span>399 <span style="color: #BB0000;">NA</span>                              II   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> DYO1146  -<span style="color: #BB0000;">1.08</span>  54.0      <span style="text-decoration: underline;">4</span>456   <span style="text-decoration: underline;">463</span>399 <span style="color: #BB0000;">NA</span>                              II   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> DYO1078  -<span style="color: #BB0000;">1.09</span>  54.0      <span style="text-decoration: underline;">5</span>730   <span style="text-decoration: underline;">463</span>443 THE ADELPHI HOTEL AND THE RAIL… II   </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 91 more rows</span></span></span></code></pre>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">york_existing_worst</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 21 × 7</span></span></span>
<span><span class="co">##    desig_id   long   lat object_id pref_ref name                           grade</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> DYO91    -<span style="color: #BB0000;">0.980</span>  54.0      <span style="text-decoration: underline;">3</span>545   <span style="text-decoration: underline;">328</span>688 SANDBURN CROSS IN GROUNDS OF … II   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> DYO91    -<span style="color: #BB0000;">0.980</span>  54.0      <span style="text-decoration: underline;">4</span>882   <span style="text-decoration: underline;">328</span>688 SANDBURN CROSS IN GROUNDS OF … II   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> DYO222   -<span style="color: #BB0000;">1.20</span>   54.0      <span style="text-decoration: underline;">3</span>720   <span style="text-decoration: underline;">331</span>644 PEAR TREE FARMHOUSE            II   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> DYO222   -<span style="color: #BB0000;">1.20</span>   54.0      <span style="text-decoration: underline;">5</span>057   <span style="text-decoration: underline;">331</span>644 PEAR TREE FARMHOUSE            II   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> DYO1477  -<span style="color: #BB0000;">0.983</span>  54.0      <span style="text-decoration: underline;">6</span>043   <span style="text-decoration: underline;">328</span>687 MILEPOST APPROXIMATELY 75 MET… II   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> DYO1477  -<span style="color: #BB0000;">0.983</span>  54.0      <span style="text-decoration: underline;">4</span>707   <span style="text-decoration: underline;">328</span>687 MILEPOST APPROXIMATELY 75 MET… II   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> DYO138   -<span style="color: #BB0000;">1.21</span>   54.0      <span style="text-decoration: underline;">3</span>591   <span style="text-decoration: underline;">331</span>645 CROFT FARMHOUSE                II   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> DYO138   -<span style="color: #BB0000;">1.21</span>   54.0      <span style="text-decoration: underline;">4</span>928   <span style="text-decoration: underline;">331</span>645 CROFT FARMHOUSE                II   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> DYO137   -<span style="color: #BB0000;">1.19</span>   54.0      <span style="text-decoration: underline;">3</span>590   <span style="text-decoration: underline;">331</span>701 BOUNDARY POST AT SE 5303 5336  II   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> DYO137   -<span style="color: #BB0000;">1.19</span>   54.0      <span style="text-decoration: underline;">4</span>927   <span style="text-decoration: underline;">331</span>701 BOUNDARY POST AT SE 5303 5336  II   </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 11 more rows</span></span></span></code></pre>
<p>Let’s look at the coverage of these places,</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/coverage.html">coverage</a></span><span class="op">(</span><span class="va">york_existing_worst</span>,</span>
<span>         <span class="va">york_crime</span>,</span>
<span>         distance_cutoff <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 1 × 7</span></span></span>
<span><span class="co">##   distance_within n_cov n_not_cov prop_cov prop_not_cov dist_avg dist_sd</span></span>
<span><span class="co">##             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>             100     0      <span style="text-decoration: underline;">1</span>814        0            1    <span style="text-decoration: underline;">5</span>674.   <span style="text-decoration: underline;">1</span>040.</span></span></code></pre>
<p>So these are <em>worst</em> placements - we should choose some better
facilities. However, if we consider the possibility that we could move
these existing facilities to better locations, then we might be able to
save a lot of money! We can do this with
<code>max_coverage_relocation</code>.</p>
<p>Here we use <code>max_coverage_relocation</code>, which is similar in
form to <code>max_coverage</code>.</p>
<p>Here, we specify:</p>
<ul>
<li>
<code>existing_facility</code> with
<code>york_existing_worst</code>
</li>
<li>
<code>proposed_facility</code> with
<code>york_proposed_best</code>
</li>
<li>
<code>user</code> is <code>york_crime</code>,</li>
<li>
<code>distance_cutoff</code> is 100 - for 100m</li>
</ul>
<p>instead of specifying <code>n_added</code>, as in
<code>max_coverage</code>, we specify three <code>cost_</code>
parameters:</p>
<ul>
<li>
<code>cost_install</code> is the cost of buying a new facility and
installing it</li>
<li>
<code>cost_removal</code> is the cost of removing a facility and
installing it in a new location</li>
<li>
<code>cost_total</code> is the total available money to spend.</li>
</ul>
<p>Here we state that the installation cost is 10, the remocal cost is
1, and the total available cost is 10. There is only enough total
resources to install one facility.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span></span>
<span><span class="va">mc_relocate_worst</span> <span class="op">&lt;-</span>  <span class="fu"><a href="../reference/max_coverage_relocation.html">max_coverage_relocation</a></span><span class="op">(</span></span>
<span>    existing_facility <span class="op">=</span> <span class="va">york_existing_worst</span>,</span>
<span>    proposed_facility <span class="op">=</span> <span class="va">york_proposed_best</span>,</span>
<span>    user <span class="op">=</span> <span class="va">york_crime</span>,</span>
<span>    distance_cutoff <span class="op">=</span> <span class="fl">100</span>,</span>
<span>    cost_install <span class="op">=</span> <span class="fl">500</span>,</span>
<span>    cost_removal <span class="op">=</span> <span class="fl">100</span>,</span>
<span>    cost_total <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    user  system elapsed </span></span>
<span><span class="co">##   0.462   0.011   0.474</span></span></code></pre>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mc_relocate_worst</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## ----------------------------------------- </span></span>
<span><span class="co">## Model Fit: maxcovr relocation model </span></span>
<span><span class="co">## ----------------------------------------- </span></span>
<span><span class="co">## model_used:        max_coverage_relocation </span></span>
<span><span class="co">## existing_facility: york_existing_worst </span></span>
<span><span class="co">## proposed_facility: york_proposed_best </span></span>
<span><span class="co">## user:              york_crime </span></span>
<span><span class="co">## distance_cutoff:   100 </span></span>
<span><span class="co">## cost_install:      500 </span></span>
<span><span class="co">## cost_removal:     100 </span></span>
<span><span class="co">## cost_total:        1000 </span></span>
<span><span class="co">## solver:            lpSolve </span></span>
<span><span class="co">## -----------------------------------------</span></span></code></pre>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mc_relocate_worst</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## --------------------------------------- </span></span>
<span><span class="co">## Model Fit: maxcovr relocation model </span></span>
<span><span class="co">## --------------------------------------- </span></span>
<span><span class="co">## Distance Cutoff: 100m </span></span>
<span><span class="co">## Facilities: </span></span>
<span><span class="co">##     Added:       10 </span></span>
<span><span class="co">##     Removed:     10L </span></span>
<span><span class="co">## Coverage (Previous): </span></span>
<span><span class="co">##     # Users:     260   (0) </span></span>
<span><span class="co">##     Proportion:  0.1433 (0) </span></span>
<span><span class="co">## Distance (m) to Facility (Previous): </span></span>
<span><span class="co">##        Avg:      1720 (5674) </span></span>
<span><span class="co">##        SD:       1542 (1040) </span></span>
<span><span class="co">## Costs: </span></span>
<span><span class="co">##     Total:       1000 </span></span>
<span><span class="co">##     Install:     500 </span></span>
<span><span class="co">##     Removal:  100 </span></span>
<span><span class="co">## ---------------------------------------</span></span></code></pre>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">york_existing_worst</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 21  7</span></span></code></pre>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">york_proposed_best</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 101   7</span></span></code></pre>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mc_relocate_worst</span><span class="op">$</span><span class="va">existing_facility</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 21 × 8</span></span></span>
<span><span class="co">##    desig_id   long   lat object_id pref_ref name              grade is_relocated</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> DYO91    -<span style="color: #BB0000;">0.980</span>  54.0      <span style="text-decoration: underline;">3</span>545   <span style="text-decoration: underline;">328</span>688 SANDBURN CROSS I… II    FALSE       </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> DYO91    -<span style="color: #BB0000;">0.980</span>  54.0      <span style="text-decoration: underline;">4</span>882   <span style="text-decoration: underline;">328</span>688 SANDBURN CROSS I… II    FALSE       </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> DYO222   -<span style="color: #BB0000;">1.20</span>   54.0      <span style="text-decoration: underline;">3</span>720   <span style="text-decoration: underline;">331</span>644 PEAR TREE FARMHO… II    FALSE       </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> DYO222   -<span style="color: #BB0000;">1.20</span>   54.0      <span style="text-decoration: underline;">5</span>057   <span style="text-decoration: underline;">331</span>644 PEAR TREE FARMHO… II    FALSE       </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> DYO1477  -<span style="color: #BB0000;">0.983</span>  54.0      <span style="text-decoration: underline;">6</span>043   <span style="text-decoration: underline;">328</span>687 MILEPOST APPROXI… II    FALSE       </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> DYO1477  -<span style="color: #BB0000;">0.983</span>  54.0      <span style="text-decoration: underline;">4</span>707   <span style="text-decoration: underline;">328</span>687 MILEPOST APPROXI… II    FALSE       </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> DYO138   -<span style="color: #BB0000;">1.21</span>   54.0      <span style="text-decoration: underline;">3</span>591   <span style="text-decoration: underline;">331</span>645 CROFT FARMHOUSE   II    FALSE       </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> DYO138   -<span style="color: #BB0000;">1.21</span>   54.0      <span style="text-decoration: underline;">4</span>928   <span style="text-decoration: underline;">331</span>645 CROFT FARMHOUSE   II    FALSE       </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> DYO137   -<span style="color: #BB0000;">1.19</span>   54.0      <span style="text-decoration: underline;">3</span>590   <span style="text-decoration: underline;">331</span>701 BOUNDARY POST AT… II    FALSE       </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> DYO137   -<span style="color: #BB0000;">1.19</span>   54.0      <span style="text-decoration: underline;">4</span>927   <span style="text-decoration: underline;">331</span>701 BOUNDARY POST AT… II    FALSE       </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 11 more rows</span></span></span></code></pre>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mc_relocate_worst</span><span class="op">$</span><span class="va">proposed_facility</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 101 × 8</span></span></span>
<span><span class="co">##    desig_id  long   lat object_id pref_ref name               grade is_installed</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> DYO788   -<span style="color: #BB0000;">1.09</span>  54.0      <span style="text-decoration: underline;">3</span>362   <span style="text-decoration: underline;">463</span>995 <span style="color: #BB0000;">NA</span>                 II*              0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> DYO857   -<span style="color: #BB0000;">1.08</span>  54.0      <span style="text-decoration: underline;">5</span>549   <span style="text-decoration: underline;">463</span>864 UNIVERSITY COLLEG… II               0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> DYO857   -<span style="color: #BB0000;">1.08</span>  54.0      <span style="text-decoration: underline;">4</span>212   <span style="text-decoration: underline;">463</span>864 UNIVERSITY COLLEG… II               0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> DYO1212  -<span style="color: #BB0000;">1.08</span>  54.0      <span style="text-decoration: underline;">5</span>843   <span style="text-decoration: underline;">463</span>237 <span style="color: #BB0000;">NA</span>                 II               1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> DYO1212  -<span style="color: #BB0000;">1.08</span>  54.0      <span style="text-decoration: underline;">4</span>506   <span style="text-decoration: underline;">463</span>237 <span style="color: #BB0000;">NA</span>                 II               0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> DYO862   -<span style="color: #BB0000;">1.08</span>  54.0      <span style="text-decoration: underline;">5</span>554   <span style="text-decoration: underline;">463</span>874 <span style="color: #BB0000;">NA</span>                 II               0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> DYO862   -<span style="color: #BB0000;">1.08</span>  54.0      <span style="text-decoration: underline;">4</span>217   <span style="text-decoration: underline;">463</span>874 <span style="color: #BB0000;">NA</span>                 II               0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> DYO1146  -<span style="color: #BB0000;">1.08</span>  54.0      <span style="text-decoration: underline;">5</span>793   <span style="text-decoration: underline;">463</span>399 <span style="color: #BB0000;">NA</span>                 II               1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> DYO1146  -<span style="color: #BB0000;">1.08</span>  54.0      <span style="text-decoration: underline;">4</span>456   <span style="text-decoration: underline;">463</span>399 <span style="color: #BB0000;">NA</span>                 II               0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> DYO1078  -<span style="color: #BB0000;">1.09</span>  54.0      <span style="text-decoration: underline;">5</span>730   <span style="text-decoration: underline;">463</span>443 THE ADELPHI HOTEL… II               0</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 91 more rows</span></span></span></code></pre>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mc_relocate_worst</span><span class="op">$</span><span class="va">facilities_selected</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 21 × 7</span></span></span>
<span><span class="co">##    desig_id   long   lat object_id pref_ref name                           grade</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> DYO91    -<span style="color: #BB0000;">0.980</span>  54.0      <span style="text-decoration: underline;">3</span>545   <span style="text-decoration: underline;">328</span>688 SANDBURN CROSS IN GROUNDS OF … II   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> DYO91    -<span style="color: #BB0000;">0.980</span>  54.0      <span style="text-decoration: underline;">4</span>882   <span style="text-decoration: underline;">328</span>688 SANDBURN CROSS IN GROUNDS OF … II   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> DYO222   -<span style="color: #BB0000;">1.20</span>   54.0      <span style="text-decoration: underline;">3</span>720   <span style="text-decoration: underline;">331</span>644 PEAR TREE FARMHOUSE            II   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> DYO222   -<span style="color: #BB0000;">1.20</span>   54.0      <span style="text-decoration: underline;">5</span>057   <span style="text-decoration: underline;">331</span>644 PEAR TREE FARMHOUSE            II   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> DYO1477  -<span style="color: #BB0000;">0.983</span>  54.0      <span style="text-decoration: underline;">6</span>043   <span style="text-decoration: underline;">328</span>687 MILEPOST APPROXIMATELY 75 MET… II   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> DYO1477  -<span style="color: #BB0000;">0.983</span>  54.0      <span style="text-decoration: underline;">4</span>707   <span style="text-decoration: underline;">328</span>687 MILEPOST APPROXIMATELY 75 MET… II   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> DYO138   -<span style="color: #BB0000;">1.21</span>   54.0      <span style="text-decoration: underline;">3</span>591   <span style="text-decoration: underline;">331</span>645 CROFT FARMHOUSE                II   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> DYO138   -<span style="color: #BB0000;">1.21</span>   54.0      <span style="text-decoration: underline;">4</span>928   <span style="text-decoration: underline;">331</span>645 CROFT FARMHOUSE                II   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> DYO137   -<span style="color: #BB0000;">1.19</span>   54.0      <span style="text-decoration: underline;">3</span>590   <span style="text-decoration: underline;">331</span>701 BOUNDARY POST AT SE 5303 5336  II   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> DYO137   -<span style="color: #BB0000;">1.19</span>   54.0      <span style="text-decoration: underline;">4</span>927   <span style="text-decoration: underline;">331</span>701 BOUNDARY POST AT SE 5303 5336  II   </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 11 more rows</span></span></span></code></pre>
<p>You can then start to toy with the different pricings if you
like.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span></span>
<span><span class="va">mc_relocate_worst_eq</span> <span class="op">&lt;-</span>  <span class="fu"><a href="../reference/max_coverage_relocation.html">max_coverage_relocation</a></span><span class="op">(</span></span>
<span>    existing_facility <span class="op">=</span> <span class="va">york_existing_worst</span>,</span>
<span>    proposed_facility <span class="op">=</span> <span class="va">york_proposed_best</span>,</span>
<span>    user <span class="op">=</span> <span class="va">york_crime</span>,</span>
<span>    distance_cutoff <span class="op">=</span> <span class="fl">100</span>,</span>
<span>    cost_install <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    cost_removal <span class="op">=</span> <span class="fl">100</span>,</span>
<span>    cost_total <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    user  system elapsed </span></span>
<span><span class="co">##   0.279   0.020   0.299</span></span></code></pre>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mc_relocate_worst_eq</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## ----------------------------------------- </span></span>
<span><span class="co">## Model Fit: maxcovr relocation model </span></span>
<span><span class="co">## ----------------------------------------- </span></span>
<span><span class="co">## model_used:        max_coverage_relocation </span></span>
<span><span class="co">## existing_facility: york_existing_worst </span></span>
<span><span class="co">## proposed_facility: york_proposed_best </span></span>
<span><span class="co">## user:              york_crime </span></span>
<span><span class="co">## distance_cutoff:   100 </span></span>
<span><span class="co">## cost_install:      10 </span></span>
<span><span class="co">## cost_removal:     100 </span></span>
<span><span class="co">## cost_total:        10 </span></span>
<span><span class="co">## solver:            lpSolve </span></span>
<span><span class="co">## -----------------------------------------</span></span></code></pre>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mc_relocate_worst_eq</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## --------------------------------------- </span></span>
<span><span class="co">## Model Fit: maxcovr relocation model </span></span>
<span><span class="co">## --------------------------------------- </span></span>
<span><span class="co">## Distance Cutoff: 100m </span></span>
<span><span class="co">## Facilities: </span></span>
<span><span class="co">##     Added:       1 </span></span>
<span><span class="co">##     Removed:     0L </span></span>
<span><span class="co">## Coverage (Previous): </span></span>
<span><span class="co">##     # Users:     44   (0) </span></span>
<span><span class="co">##     Proportion:  0.0243 (0) </span></span>
<span><span class="co">## Distance (m) to Facility (Previous): </span></span>
<span><span class="co">##        Avg:      2071 (5674) </span></span>
<span><span class="co">##        SD:       1521 (1040) </span></span>
<span><span class="co">## Costs: </span></span>
<span><span class="co">##     Total:       10 </span></span>
<span><span class="co">##     Install:     10 </span></span>
<span><span class="co">##     Removal:  100 </span></span>
<span><span class="co">## ---------------------------------------</span></span></code></pre>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nicholas Tierney, Mark Padgham.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
